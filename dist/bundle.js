!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(1);e.BaseCanvas=class extends s.Vector2{constructor(t,e,n,s){super(t,e),this.theCanvas=document.createElement("canvas"),this.theCanvas.id=n,this.ctx=this.GetCanvasContext2D(this.theCanvas),this.theCanvas.height=this.GetHeight(),this.theCanvas.width=this.GetWidth(),s.append(this.theCanvas)}Draw(){return this.ctx.fillStyle="#A9A9A9",this.ctx.fillRect(0,0,this.GetWidth(),this.GetHeight()),this.ctx.fillStyle="#0000ff",this.ctx.fillRect(10,10,100,100),this.ctx}GreedyClearCanvas(){this.ctx.clearRect(0,0,this.GetWidth(),this.GetHeight())}GetCanvasContext2D(t){return t.getContext("2d")}GetWidth(){return this.x}GetHeight(){return this.y}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Vector2=class{constructor(t,e){this.x=t,this.y=e}concat(){return"x:["+this.x+"], y:["+this.y+"]"}getValueX(){return this.x}getValueY(){return this.y}setValueX(t){this.x=t}setValueY(t){this.y=t}setValues(t,e){this.x=t,this.y=e}}},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(4);class r{start(){(new s.Main).Run(500)}}e.App=r,(new r).start()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(5),r=n(6);e.Main=class{constructor(){this.loopCount=0,this.launchMessage="Start",this.canvasManager=new r.CanvasManager,this.inputManager=new s.InputManager}Run(t){this.Start(),setInterval(()=>{this.Loop(),this.loopCount++},t)}Start(){return console.log(this.launchMessage+" will now be posted to the document "),this.inputManager.InitInputManager(),this.canvasManager.InitCanvasManager(),this.launchMessage}Loop(){this.inputManager.NewInputLoopCheck(),this.canvasManager.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.currentInputs=new Array}NewInputLoopCheck(){}InitInputManager(){document.addEventListener("keydown",t=>{console.log("key is pressed")})}checkKeyPressIsValid(t){for(let e=0;e<s.validInputs.length;e++)if(s.validInputs[e]===t)return console.log("key "+t+" is pressed"),!0;return!1}}s.validInputs=["w","a","s","d"," "],e.InputManager=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(7),r=n(9);e.CanvasManager=class{constructor(){}InitCanvasManager(){this.mainDiv=document.createElement("div"),this.mainDiv.id="main_div",document.body.appendChild(this.mainDiv);const t=document.getElementById("main_div");this.DrawableVector=r.ViewportHelper.GetSquareInBrowser(),this.parentCanvas=new s.ParentCanvas(this.DrawableVector.x,this.DrawableVector.y,"parent",t),this.parentCanvas.RegisterChildCanvas(this.DrawableVector.x,this.DrawableVector.y)}Draw(){this.parentCanvas.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(0),r=n(8);e.ParentCanvas=class extends s.BaseCanvas{constructor(t,e,n,s){super(t,e,n,s),this.children=new Array}RegisterChildCanvas(t,e){const n="child_canvas_"+(this.children.length+1);console.log("registering a new canvas with ID [ "+n+"]");const s=new r.ChildCanvas(t,e,n,this.theCanvas);this.children.push(s)}Draw(){console.log("draw called from parent");for(const t of this.children){const e=t.Draw();this.ctx.drawImage(e.canvas,0,0)}return this.ctx}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(0);e.ChildCanvas=class extends s.BaseCanvas{Draw(){return console.log("called from child"),super.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(1);e.ViewportHelper=class{static GetSquareInBrowser(){const t=this.GetBrowserHeight(),e=this.GetBrowserWidth(),n=new s.Vector2(0,0);return t<e?n.setValues(t,t):n.setValues(e,e),n}static GetBrowserWidth(){return window.innerWidth}static GetBrowserHeight(){return window.innerHeight}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwbGljYXRpb24vdmlld3BvcnQvY2FudmFzL19CYXNlQ2FudmFzLnRzIiwid2VicGFjazovLy8uL251bWVyaWNzL21vZGVscy9WZWN0b3IyLm1vZGVsLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL19tYWluLnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL2lucHV0L0lucHV0TWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9hcHBsaWNhdGlvbi92aWV3cG9ydC9jYW52YXMvQ2FudmFzTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9hcHBsaWNhdGlvbi92aWV3cG9ydC9jYW52YXMvUGFyZW50Q2FudmFzLnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL3ZpZXdwb3J0L2NhbnZhcy9DaGlsZENhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9hcHBsaWNhdGlvbi92aWV3cG9ydC9WaWV3cG9ydC5IZWxwZXIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJWZWN0b3IyX21vZGVsXzEiLCJCYXNlQ2FudmFzIiwiVmVjdG9yMiIsIltvYmplY3QgT2JqZWN0XSIsIndpZHRoIiwiaGVpZ2h0IiwiaWQiLCJhdHRhY2hlZFRvIiwic3VwZXIiLCJ0aGlzIiwidGhlQ2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiR2V0Q2FudmFzQ29udGV4dDJEIiwiR2V0SGVpZ2h0IiwiR2V0V2lkdGgiLCJhcHBlbmQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNsZWFyUmVjdCIsImdldENvbnRleHQiLCJ4IiwieSIsIl9tYWluXzEiLCJBcHAiLCJNYWluIiwiUnVuIiwic3RhcnQiLCJJbnB1dE1hbmFnZXJfMSIsIkNhbnZhc01hbmFnZXJfMSIsImxvb3BDb3VudCIsImxhdW5jaE1lc3NhZ2UiLCJjYW52YXNNYW5hZ2VyIiwiQ2FudmFzTWFuYWdlciIsImlucHV0TWFuYWdlciIsIklucHV0TWFuYWdlciIsInRpbWVvdXQiLCJTdGFydCIsInNldEludGVydmFsIiwiTG9vcCIsImNvbnNvbGUiLCJsb2ciLCJJbml0SW5wdXRNYW5hZ2VyIiwiSW5pdENhbnZhc01hbmFnZXIiLCJOZXdJbnB1dExvb3BDaGVjayIsIkRyYXciLCJjdXJyZW50SW5wdXRzIiwiQXJyYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJwcmVzc2VkS2V5IiwidmFsaWRJbnB1dHMiLCJsZW5ndGgiLCJQYXJlbnRDYW52YXNfMSIsIlZpZXdwb3J0X0hlbHBlcl8xIiwibWFpbkRpdiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImRvY3VtZW50RGl2IiwiZ2V0RWxlbWVudEJ5SWQiLCJEcmF3YWJsZVZlY3RvciIsIlZpZXdwb3J0SGVscGVyIiwiR2V0U3F1YXJlSW5Ccm93c2VyIiwicGFyZW50Q2FudmFzIiwiUGFyZW50Q2FudmFzIiwiUmVnaXN0ZXJDaGlsZENhbnZhcyIsIl9CYXNlQ2FudmFzXzEiLCJDaGlsZENhbnZhc18xIiwiY2hpbGRyZW4iLCJjYW52YXNJZCIsImNoaWxkQ2FudmFzIiwiQ2hpbGRDYW52YXMiLCJwdXNoIiwiZHJhd25MYXllciIsImRyYXdJbWFnZSIsImNhbnZhcyIsImgiLCJHZXRCcm93c2VySGVpZ2h0IiwidyIsIkdldEJyb3dzZXJXaWR0aCIsImJveCIsInNldFZhbHVlcyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFB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QUFXLEtBQy9ELE1BQU1DLEVBQWMsSUFBSUgsRUFBQUksWUFBWXBFLEVBQU9DLEVBQVFpRSxFQUFVN0QsS0FBS0MsV0FDbEVELEtBQUs0RCxTQUFTSSxLQUFLRixHQUd2QnBFLE9BQ0dzQyxRQUFRQyxJQUFJLDJCQUVaLElBQUssTUFBTTZCLEtBQWU5RCxLQUFLNEQsU0FBVSxDQUNyQyxNQUFNSyxFQUFhSCxFQUFZekIsT0FDL0JyQyxLQUFLSSxJQUFJOEQsVUFBVUQsRUFBV0UsT0FBUSxFQUFHLEdBRzdDLE9BQU9uRSxLQUFLSSxxRkNqQ25CLE1BQUFzRCxFQUFBdkcsRUFBQSxHQVNBRSxFQUFBMEcsWUFBQSxjQUFpQ0wsRUFBQWxFLFdBQ2hDRSxPQUVJLE9BREFzQyxRQUFRQyxJQUFJLHFCQUNMbEMsTUFBTXNDLHdGQ1psQixNQUFBOUMsRUFBQXBDLEVBQUEsR0FFQUUsRUFBQWdHLGVBQUEsTUFDSTNELDRCQUNJLE1BQU0wRSxFQUFJcEUsS0FBS3FFLG1CQUNUQyxFQUFJdEUsS0FBS3VFLGtCQUNUQyxFQUFNLElBQUlqRixFQUFBRSxRQUFRLEVBQUcsR0FNM0IsT0FMSTJFLEVBQUlFLEVBQ0pFLEVBQUlDLFVBQVVMLEVBQUdBLEdBRWpCSSxFQUFJQyxVQUFVSCxFQUFHQSxHQUVkRSxFQUdIOUUseUJBQ0osT0FBT2dGLE9BQU9DLFdBRVZqRiwwQkFDSixPQUFPZ0YsT0FBT0UiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi8uLi9udW1lcmljcy9tb2RlbHMvVmVjdG9yMi5tb2RlbFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJhc2VDYW52YXMgZXh0ZW5kcyBWZWN0b3IyIHtcclxuICAgIHByb3RlY3RlZCB0aGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJvdGVjdGVkIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpZDogc3RyaW5nLCBhdHRhY2hlZFRvOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICB0aGlzLnRoZUNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIHRoaXMudGhlQ2FudmFzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLkdldENhbnZhc0NvbnRleHQyRCh0aGlzLnRoZUNhbnZhcyk7XHJcbiAgICAgICAgdGhpcy50aGVDYW52YXMuaGVpZ2h0ID0gdGhpcy5HZXRIZWlnaHQoKTtcclxuICAgICAgICB0aGlzLnRoZUNhbnZhcy53aWR0aCA9IHRoaXMuR2V0V2lkdGgoKTtcclxuICAgICAgICBhdHRhY2hlZFRvLmFwcGVuZCh0aGlzLnRoZUNhbnZhcyk7XHJcbiAgICB9XHJcblxyXG4gICAgRHJhdygpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICcjQTlBOUE5JztcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLkdldFdpZHRoKCksIHRoaXMuR2V0SGVpZ2h0KCkpO1xyXG5cclxuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnIzAwMDBmZic7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMTAsIDEwLCAxMDAsIDEwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmN0eDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgR3JlZWR5Q2xlYXJDYW52YXMoKSB7XHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuR2V0V2lkdGgoKSwgdGhpcy5HZXRIZWlnaHQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBHZXRDYW52YXNDb250ZXh0MkQodGhlQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIEdldFdpZHRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLng7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgR2V0SGVpZ2h0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVmVjdG9yMiB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uY2F0KCkge1xyXG4gICAgICAgIHJldHVybiAneDpbJyArIHRoaXMueCArICddLCB5OlsnICsgdGhpcy55ICsgJ10nO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhbHVlWCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54O1xyXG4gICAgfVxyXG4gICAgZ2V0VmFsdWVZKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VmFsdWVYKHg6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICB9XHJcbiAgICBzZXRWYWx1ZVkoeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuICAgIHNldFZhbHVlcyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBNYWluIH0gZnJvbSAnLi9hcHBsaWNhdGlvbi9fbWFpbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIHN0YXJ0KCkge1xyXG4gICAgICAgIGNvbnN0IG1haW4gPSBuZXcgTWFpbigpOyAgICAgXHJcbiAgICAgICAgbWFpbi5SdW4oNTAwKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgYXBwbGljYXRpb24gPSBuZXcgQXBwKCk7XHJcbmFwcGxpY2F0aW9uLnN0YXJ0KCk7IiwiaW1wb3J0IHsgSW5wdXRNYW5hZ2VyIH0gZnJvbSBcIi4vaW5wdXQvSW5wdXRNYW5hZ2VyXCI7XHJcbmltcG9ydCB7IENhbnZhc01hbmFnZXIgfSBmcm9tIFwiLi92aWV3cG9ydC9jYW52YXMvQ2FudmFzTWFuYWdlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1haW4ge1xyXG4gICAgcHJpdmF0ZSBjYW52YXNNYW5hZ2VyOiBDYW52YXNNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBpbnB1dE1hbmFnZXI6IElucHV0TWFuYWdlcjtcclxuICAgIHByaXZhdGUgbG9vcENvdW50OiBudW1iZXIgPSAwO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXNNYW5hZ2VyID0gbmV3IENhbnZhc01hbmFnZXIoKTtcclxuICAgICAgICB0aGlzLmlucHV0TWFuYWdlciA9IG5ldyBJbnB1dE1hbmFnZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxhdW5jaE1lc3NhZ2U6IHN0cmluZyA9ICdTdGFydCc7XHJcblxyXG4gICAgUnVuKHRpbWVvdXQ6IG51bWJlcikge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdydW5uaW5nJyk7XHJcbiAgICAgICAgdGhpcy5TdGFydCgpO1xyXG4gICAgICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5Mb29wKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9vcENvdW50Kys7XHJcbiAgICAgICAgfSwgdGltZW91dCk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBTdGFydCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubGF1bmNoTWVzc2FnZSArICcgd2lsbCBub3cgYmUgcG9zdGVkIHRvIHRoZSBkb2N1bWVudCAnKTtcclxuICAgICAgICB0aGlzLmlucHV0TWFuYWdlci5Jbml0SW5wdXRNYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNNYW5hZ2VyLkluaXRDYW52YXNNYW5hZ2VyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF1bmNoTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBMb29wKCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbiBsb29wLiBSZW5kZXJpbmcgJyArIHRoaXMubG9vcENvdW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dE1hbmFnZXIuTmV3SW5wdXRMb29wQ2hlY2soKTtcclxuICAgICAgICB0aGlzLmNhbnZhc01hbmFnZXIuRHJhdygpO1xyXG5cclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBJbnB1dE1hbmFnZXIge1xyXG5cclxuICAgIGN1cnJlbnRJbnB1dHM6IHN0cmluZ1tdO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdmFsaWRJbnB1dHM6IEFycmF5PHN0cmluZz4gPSBbJ3cnLCAnYScsICdzJywgJ2QnLCAnICddO1xyXG4gICAgcHJpdmF0ZSBrZXlDdXJyZW50bHlQcmVzc2VkOiBib29sZWFuO1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbnB1dHMgPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY2hlY2tzIGZvciBuZXcgaW5wdXRzLiBTaG91bGQgYmUgY2FsbGVkIGluIGEgbG9vcFxyXG4gICAgICpcclxuICAgICAqIEBtZW1iZXJvZiBJbnB1dE1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgTmV3SW5wdXRMb29wQ2hlY2soKSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogc2V0cyB1cCB0aGUgaW5wdXQgbWFuYWdlclxyXG4gICAgICpcclxuICAgICAqIEBtZW1iZXJvZiBJbnB1dE1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgSW5pdElucHV0TWFuYWdlcigpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygna2V5IGlzIHByZXNzZWQnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjaGVja3MgaWYgYSBnaXZlbiBrZXkgaXMgaW4gdGhlIGxpc3Qgb2YgdmFsaWQga2V5c1xyXG4gICAgICogXHJcbiAgICAgKiBUT0RPOiB1c2UgYGluY2x1ZGVzYCBpbnN0ZWFkIG9mIGEgZm9yIGxvb3BcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJlc3NlZEtleVxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqIEBtZW1iZXJvZiBJbnB1dE1hbmFnZXJcclxuICAgICAqL1xyXG4gICAgY2hlY2tLZXlQcmVzc0lzVmFsaWQocHJlc3NlZEtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBJbnB1dE1hbmFnZXIudmFsaWRJbnB1dHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKElucHV0TWFuYWdlci52YWxpZElucHV0c1tpXSA9PT0gcHJlc3NlZEtleSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2tleSAnICsgcHJlc3NlZEtleSArICcgaXMgcHJlc3NlZCcpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIGlmIChJbnB1dE1hbmFnZXIudmFsaWRJbnB1dHMuaW5jbHVkZXMocHJlc3NlZEtleSkpIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuXHJcbn0iLCJpbXBvcnQgeyBQYXJlbnRDYW52YXMgfSBmcm9tIFwiLi9QYXJlbnRDYW52YXNcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi8uLi9udW1lcmljcy9tb2RlbHMvVmVjdG9yMi5tb2RlbFwiO1xyXG5pbXBvcnQgeyBWaWV3cG9ydEhlbHBlciB9IGZyb20gXCIuLi9WaWV3cG9ydC5IZWxwZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYW52YXNNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgdGhlQ2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgbWFpbkRpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgcHJpdmF0ZSBEcmF3YWJsZVZlY3RvcjogVmVjdG9yMjtcclxuXHJcbiAgICBwcml2YXRlIHBhcmVudENhbnZhczogUGFyZW50Q2FudmFzO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIEluaXRDYW52YXNNYW5hZ2VyKCkge1xyXG4gICAgICAgIHRoaXMubWFpbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMubWFpbkRpdi5pZCA9ICdtYWluX2Rpdic7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLm1haW5EaXYpO1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5fZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5EcmF3YWJsZVZlY3RvciA9IFZpZXdwb3J0SGVscGVyLkdldFNxdWFyZUluQnJvd3NlcigpO1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2FudmFzID0gbmV3IFBhcmVudENhbnZhcyh0aGlzLkRyYXdhYmxlVmVjdG9yLngsIHRoaXMuRHJhd2FibGVWZWN0b3IueSwgJ3BhcmVudCcsIGRvY3VtZW50RGl2KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBhcmVudENhbnZhcy5SZWdpc3RlckNoaWxkQ2FudmFzKHRoaXMuRHJhd2FibGVWZWN0b3IueCwgdGhpcy5EcmF3YWJsZVZlY3Rvci55KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBcclxuXHJcbiAgICBEcmF3KCkge1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2FudmFzLkRyYXcoKTtcclxuICAgIH1cclxuXHJcblxyXG59IiwiaW1wb3J0IHsgQmFzZUNhbnZhcyB9IGZyb20gXCIuL19CYXNlQ2FudmFzXCI7XHJcbmltcG9ydCB7IENoaWxkQ2FudmFzIH0gZnJvbSBcIi4vQ2hpbGRDYW52YXNcIjtcclxuXHJcbi8qKlxyXG4gKiBNYWluIGNhbnZhcy4gT25seSBjcmVhdGUgb25lIG9mIHRoZXNlXHJcbiAqXHJcbiAqIEBleHBvcnRcclxuICogQGNsYXNzIENoaWxkQ2FudmFzXHJcbiAqIEBleHRlbmRzIHtCYXNlQ2FudmFzfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBhcmVudENhbnZhcyBleHRlbmRzIEJhc2VDYW52YXMge1xyXG4gICBwcml2YXRlIGNoaWxkcmVuOiBDaGlsZENhbnZhc1tdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpZDogc3RyaW5nLCBhdHRhY2hlZFRvOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQsIGlkLCBhdHRhY2hlZFRvKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gbmV3IEFycmF5PENoaWxkQ2FudmFzPigpO1xyXG4gICAgfVxyXG5cclxuICAgIFJlZ2lzdGVyQ2hpbGRDYW52YXMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBjYW52YXNJZCA9ICdjaGlsZF9jYW52YXNfJyArICh0aGlzLmNoaWxkcmVuLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlcmluZyBhIG5ldyBjYW52YXMgd2l0aCBJRCBbICcgKyBjYW52YXNJZCArICddJyk7XHJcbiAgICAgICAgY29uc3QgY2hpbGRDYW52YXMgPSBuZXcgQ2hpbGRDYW52YXMod2lkdGgsIGhlaWdodCwgY2FudmFzSWQsIHRoaXMudGhlQ2FudmFzKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGRDYW52YXMpO1xyXG4gICB9XHJcblxyXG4gICAgRHJhdygpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gICAgICAgY29uc29sZS5sb2coJ2RyYXcgY2FsbGVkIGZyb20gcGFyZW50Jyk7XHJcbiAgICAgICAvLyBzdXBlci5EcmF3KCk7XHJcbiAgICAgICBmb3IgKGNvbnN0IGNoaWxkQ2FudmFzIG9mIHRoaXMuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICBjb25zdCBkcmF3bkxheWVyID0gY2hpbGRDYW52YXMuRHJhdygpO1xyXG4gICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShkcmF3bkxheWVyLmNhbnZhcywgMCwgMCk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBCYXNlQ2FudmFzIH0gZnJvbSBcIi4vX0Jhc2VDYW52YXNcIjtcclxuXHJcbi8qKlxyXG4gKiBjaGlsZCBjYW52YXMsIHJlZ2lzdGVyIGFzIG1hbnkgYXMgeW91IG5lZWRcclxuICpcclxuICogQGV4cG9ydFxyXG4gKiBAY2xhc3MgQ2hpbGRDYW52YXNcclxuICogQGV4dGVuZHMge0Jhc2VDYW52YXN9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2hpbGRDYW52YXMgZXh0ZW5kcyBCYXNlQ2FudmFzIHtcclxuIERyYXcoKSB7XHJcbiAgICAgY29uc29sZS5sb2coJ2NhbGxlZCBmcm9tIGNoaWxkJyk7XHJcbiAgICAgcmV0dXJuIHN1cGVyLkRyYXcoKTtcclxuXHJcbiB9XHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uLy4uL251bWVyaWNzL21vZGVscy9WZWN0b3IyLm1vZGVsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVmlld3BvcnRIZWxwZXIge1xyXG4gICAgc3RhdGljIEdldFNxdWFyZUluQnJvd3NlcigpOiBWZWN0b3IyIHtcclxuICAgICAgICBjb25zdCBoID0gdGhpcy5HZXRCcm93c2VySGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuR2V0QnJvd3NlcldpZHRoKCk7XHJcbiAgICAgICAgY29uc3QgYm94ID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgaWYgKGggPCB3KSB7XHJcbiAgICAgICAgICAgIGJveC5zZXRWYWx1ZXMoaCwgaCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYm94LnNldFZhbHVlcyh3LCB3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJveDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBHZXRCcm93c2VyV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgR2V0QnJvd3NlckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==