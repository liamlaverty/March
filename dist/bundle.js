!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(1);e.BaseCanvas=class extends s.Vector2{constructor(t,e,n,s){super(t,e),this.theCanvas=document.createElement("canvas"),this.theCanvas.id=n,this.ctx=this.GetCanvasContext2D(this.theCanvas),this.theCanvas.height=this.GetHeight(),this.theCanvas.width=this.GetWidth(),s.append(this.theCanvas)}Draw(){return this.ctx.fillStyle="#A9A9A9",this.ctx.fillRect(0,0,this.GetWidth(),this.GetHeight()),this.ctx.fillStyle="#0000ff",this.ctx.fillRect(10,10,100,100),this.ctx}GreedyClearCanvas(){this.ctx.clearRect(0,0,this.GetWidth(),this.GetHeight())}GetCanvasContext2D(t){return t.getContext("2d")}GetWidth(){return this.x}GetHeight(){return this.y}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Vector2=class{constructor(t,e){this.x=t,this.y=e}concat(){return"x:["+this.x+"], y:["+this.y+"]"}getValueX(){return this.x}getValueY(){return this.y}setValueX(t){this.x=t}setValueY(t){this.y=t}setValues(t,e){this.x=t,this.y=e}}},function(t,e,n){t.exports=n(3)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(4);class r{start(){(new s.Main).Run(500)}}e.App=r,(new r).start()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(5),r=n(9);e.Main=class{constructor(){this.loopCount=0,this.launchMessage="Start",this.canvasManager=new s.CanvasManager,this.inputManager=new r.InputManager}Run(t){this.Start(),setInterval(()=>{this.Loop(),this.loopCount++},t)}Start(){return console.log(this.launchMessage+" will now be posted to the document "),this.inputManager.InitInputManager(),this.canvasManager.InitCanvasManager(),this.launchMessage}Loop(){this.inputManager.NewInputLoopCheck(),this.canvasManager.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(6),r=n(8);e.CanvasManager=class{constructor(){}InitCanvasManager(){this.mainDiv=document.createElement("div"),this.mainDiv.id="main_div",document.body.appendChild(this.mainDiv);const t=document.getElementById("main_div");this.DrawableVector=r.ViewportHelper.GetSquareInBrowser(),this.parentCanvas=new s.ParentCanvas(this.DrawableVector.x,this.DrawableVector.y,"parent",t),this.parentCanvas.RegisterChildCanvas(this.DrawableVector.x,this.DrawableVector.y)}Draw(){this.parentCanvas.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(0),r=n(7);e.ParentCanvas=class extends s.BaseCanvas{constructor(t,e,n,s){super(t,e,n,s),this.children=new Array}RegisterChildCanvas(t,e){const n="child_canvas_"+(this.children.length+1);console.log("registering a new canvas with ID [ "+n+"]");const s=new r.ChildCanvas(t,e,n,this.theCanvas);this.children.push(s)}Draw(){console.log("draw called from parent");for(const t of this.children){const e=t.Draw();this.ctx.drawImage(e.canvas,0,0)}return this.ctx}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(0);e.ChildCanvas=class extends s.BaseCanvas{Draw(){return console.log("called from child"),super.Draw()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=n(1);e.ViewportHelper=class{static GetSquareInBrowser(){const t=this.GetBrowserHeight(),e=this.GetBrowserWidth(),n=new s.Vector2(0,0);return t<e?n.setValues(t,t):n.setValues(e,e),n}static GetBrowserWidth(){return window.innerWidth}static GetBrowserHeight(){return window.innerHeight}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.currentInputs=new Array}NewInputLoopCheck(){}InitInputManager(){document.addEventListener("keydown",t=>{console.log("key is pressed")})}checkKeyPressIsValid(t){for(let e=0;e<s.validInputs.length;e++)if(s.validInputs[e]===t)return console.log("key "+t+" is pressed"),!0;return!1}}s.validInputs=["w","a","s","d"," "],e.InputManager=s}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwbGljYXRpb24vY2FudmFzL19CYXNlQ2FudmFzLnRzIiwid2VicGFjazovLy8uL251bWVyaWNzL21vZGVscy9WZWN0b3IyLm1vZGVsLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL19tYWluLnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL2NhbnZhcy9DYW52YXNNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL2NhbnZhcy9QYXJlbnRDYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vYXBwbGljYXRpb24vY2FudmFzL0NoaWxkQ2FudmFzLnRzIiwid2VicGFjazovLy8uL2FwcGxpY2F0aW9uL3ZpZXdwb3J0L1ZpZXdwb3J0LkhlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9hcHBsaWNhdGlvbi9pbnB1dC9JbnB1dE1hbmFnZXIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJWZWN0b3IyX21vZGVsXzEiLCJCYXNlQ2FudmFzIiwiVmVjdG9yMiIsIltvYmplY3QgT2JqZWN0XSIsIndpZHRoIiwiaGVpZ2h0IiwiaWQiLCJhdHRhY2hlZFRvIiwic3VwZXIiLCJ0aGlzIiwidGhlQ2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiR2V0Q2FudmFzQ29udGV4dDJEIiwiR2V0SGVpZ2h0IiwiR2V0V2lkdGgiLCJhcHBlbmQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNsZWFyUmVjdCIsImdldENvbnRleHQiLCJ4IiwieSIsIl9tYWluXzEiLCJBcHAiLCJNYWluIiwiUnVuIiwic3RhcnQiLCJDYW52YXNNYW5hZ2VyXzEiLCJJbnB1dE1hbmFnZXJfMSIsImxvb3BDb3VudCIsImxhdW5jaE1lc3NhZ2UiLCJjYW52YXNNYW5hZ2VyIiwiQ2FudmFzTWFuYWdlciIsImlucHV0TWFuYWdlciIsIklucHV0TWFuYWdlciIsInRpbWVvdXQiLCJTdGFydCIsInNldEludGVydmFsIiwiTG9vcCIsImNvbnNvbGUiLCJsb2ciLCJJbml0SW5wdXRNYW5hZ2VyIiwiSW5pdENhbnZhc01hbmFnZXIiLCJOZXdJbnB1dExvb3BDaGVjayIsIkRyYXciLCJQYXJlbnRDYW52YXNfMSIsIlZpZXdwb3J0X0hlbHBlcl8xIiwibWFpbkRpdiIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImRvY3VtZW50RGl2IiwiZ2V0RWxlbWVudEJ5SWQiLCJEcmF3YWJsZVZlY3RvciIsIlZpZXdwb3J0SGVscGVyIiwiR2V0U3F1YXJlSW5Ccm93c2VyIiwicGFyZW50Q2FudmFzIiwiUGFyZW50Q2FudmFzIiwiUmVnaXN0ZXJDaGlsZENhbnZhcyIsIl9CYXNlQ2FudmFzXzEiLCJDaGlsZENhbnZhc18xIiwiY2hpbGRyZW4iLCJBcnJheSIsImNhbnZhc0lkIiwibGVuZ3RoIiwiY2hpbGRDYW52YXMiLCJDaGlsZENhbnZhcyIsInB1c2giLCJkcmF3bkxheWVyIiwiZHJhd0ltYWdlIiwiY2FudmFzIiwiaCIsIkdldEJyb3dzZXJIZWlnaHQiLCJ3IiwiR2V0QnJvd3NlcldpZHRoIiwiYm94Iiwic2V0VmFsdWVzIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiY3VycmVudElucHV0cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXNzZWRLZXkiLCJ2YWxpZElucHV0cyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEsbUZDbEZBLE1BQUFDLEVBQUFwQyxFQUFBLEdBRUFFLEVBQUFtQyxXQUFBLGNBQWdDRCxFQUFBRSxRQUk1QkMsWUFBWUMsRUFBZUMsRUFBZ0JDLEVBQVlDLEdBQ25EQyxNQUFNSixFQUFPQyxHQUViSSxLQUFLQyxVQUFZQyxTQUFTQyxjQUFjLFVBQ3hDSCxLQUFLQyxVQUFVSixHQUFLQSxFQUNwQkcsS0FBS0ksSUFBTUosS0FBS0ssbUJBQW1CTCxLQUFLQyxXQUN4Q0QsS0FBS0MsVUFBVUwsT0FBU0ksS0FBS00sWUFDN0JOLEtBQUtDLFVBQVVOLE1BQVFLLEtBQUtPLFdBQzVCVCxFQUFXVSxPQUFPUixLQUFLQyxXQUczQlAsT0FPSSxPQU5BTSxLQUFLSSxJQUFJSyxVQUFZLFVBQ3JCVCxLQUFLSSxJQUFJTSxTQUFTLEVBQUcsRUFBR1YsS0FBS08sV0FBWVAsS0FBS00sYUFFOUNOLEtBQUtJLElBQUlLLFVBQVksVUFDckJULEtBQUtJLElBQUlNLFNBQVMsR0FBSSxHQUFJLElBQUssS0FFeEJWLEtBQUtJLElBR05WLG9CQUNOTSxLQUFLSSxJQUFJTyxVQUFVLEVBQUcsRUFBR1gsS0FBS08sV0FBWVAsS0FBS00sYUFHM0NaLG1CQUFtQk8sR0FDdkIsT0FBT0EsRUFBVVcsV0FBVyxNQUt0QmxCLFdBQ04sT0FBT00sS0FBS2EsRUFFTm5CLFlBQ04sT0FBT00sS0FBS2MsbUZDekNwQnpELEVBQUFvQyxRQUFBLE1BSUlDLFlBQVltQixFQUFXQyxHQUNuQmQsS0FBS2EsRUFBSUEsRUFDVGIsS0FBS2MsRUFBSUEsRUFHYnBCLFNBQ0ksTUFBTyxNQUFRTSxLQUFLYSxFQUFJLFNBQVdiLEtBQUtjLEVBQUksSUFHaERwQixZQUNJLE9BQU9NLEtBQUthLEVBRWhCbkIsWUFDSSxPQUFPTSxLQUFLYyxFQUdoQnBCLFVBQVVtQixHQUNOYixLQUFLYSxFQUFJQSxFQUVibkIsVUFBVW9CLEdBQ05kLEtBQUtjLEVBQUlBLEVBRWJwQixVQUFVbUIsRUFBV0MsR0FDakJkLEtBQUthLEVBQUlBLEVBQ1RiLEtBQUtjLEVBQUlBLG1IQzVCakIsTUFBQUMsRUFBQTVELEVBQUEsR0FFQSxNQUFhNkQsRUFDVHRCLFNBQ2lCLElBQUlxQixFQUFBRSxNQUNaQyxJQUFJLE1BSGpCN0QsRUFBQTJELE9BT29CLElBQUlBLEdBQ1pHLHVGQ1ZaLE1BQUFDLEVBQUFqRSxFQUFBLEdBQ0FrRSxFQUFBbEUsRUFBQSxHQUVBRSxFQUFBNEQsS0FBQSxNQUlJdkIsY0FEUU0sS0FBQXNCLFVBQW9CLEVBTVh0QixLQUFBdUIsY0FBd0IsUUFKckN2QixLQUFLd0IsY0FBZ0IsSUFBSUosRUFBQUssY0FDekJ6QixLQUFLMEIsYUFBZSxJQUFJTCxFQUFBTSxhQUs1QmpDLElBQUlrQyxHQUVBNUIsS0FBSzZCLFFBQ0xDLFlBQVksS0FDUjlCLEtBQUsrQixPQUNML0IsS0FBS3NCLGFBQ05NLEdBS1BsQyxRQUlJLE9BSEFzQyxRQUFRQyxJQUFJakMsS0FBS3VCLGNBQWdCLHdDQUNqQ3ZCLEtBQUswQixhQUFhUSxtQkFDbEJsQyxLQUFLd0IsY0FBY1csb0JBQ1puQyxLQUFLdUIsY0FHaEI3QixPQUdJTSxLQUFLMEIsYUFBYVUsb0JBQ2xCcEMsS0FBS3dCLGNBQWNhLHdGQ25DM0IsTUFBQUMsRUFBQW5GLEVBQUEsR0FDQW9GLEVBQUFwRixFQUFBLEdBRUFFLEVBQUFvRSxjQUFBLE1BT0kvQixlQUlBQSxvQkFDSU0sS0FBS3dDLFFBQVV0QyxTQUFTQyxjQUFjLE9BQ3RDSCxLQUFLd0MsUUFBUTNDLEdBQUssV0FDbEJLLFNBQVN1QyxLQUFLQyxZQUFZMUMsS0FBS3dDLFNBQy9CLE1BQU1HLEVBQWN6QyxTQUFTMEMsZUFBZSxZQUM1QzVDLEtBQUs2QyxlQUFpQk4sRUFBQU8sZUFBZUMscUJBQ3JDL0MsS0FBS2dELGFBQWUsSUFBSVYsRUFBQVcsYUFBYWpELEtBQUs2QyxlQUFlaEMsRUFBR2IsS0FBSzZDLGVBQWUvQixFQUFHLFNBQVU2QixHQUU3RjNDLEtBQUtnRCxhQUFhRSxvQkFBb0JsRCxLQUFLNkMsZUFBZWhDLEVBQUdiLEtBQUs2QyxlQUFlL0IsR0FNckZwQixPQUNJTSxLQUFLZ0QsYUFBYVgsd0ZDOUIxQixNQUFBYyxFQUFBaEcsRUFBQSxHQUNBaUcsRUFBQWpHLEVBQUEsR0FTQUUsRUFBQTRGLGFBQUEsY0FBa0NFLEVBQUEzRCxXQUc5QkUsWUFBWUMsRUFBZUMsRUFBZ0JDLEVBQVlDLEdBQ25EQyxNQUFNSixFQUFPQyxFQUFRQyxFQUFJQyxHQUN6QkUsS0FBS3FELFNBQVcsSUFBSUMsTUFHeEI1RCxvQkFBb0JDLEVBQWVDLEdBQy9CLE1BQU0yRCxFQUFXLGlCQUFtQnZELEtBQUtxRCxTQUFTRyxPQUFTLEdBQzNEeEIsUUFBUUMsSUFBSSxzQ0FBd0NzQixFQUFXLEtBQy9ELE1BQU1FLEVBQWMsSUFBSUwsRUFBQU0sWUFBWS9ELEVBQU9DLEVBQVEyRCxFQUFVdkQsS0FBS0MsV0FDbEVELEtBQUtxRCxTQUFTTSxLQUFLRixHQUd2Qi9ELE9BQ0dzQyxRQUFRQyxJQUFJLDJCQUVaLElBQUssTUFBTXdCLEtBQWV6RCxLQUFLcUQsU0FBVSxDQUNyQyxNQUFNTyxFQUFhSCxFQUFZcEIsT0FDL0JyQyxLQUFLSSxJQUFJeUQsVUFBVUQsRUFBV0UsT0FBUSxFQUFHLEdBRzdDLE9BQU85RCxLQUFLSSxxRkNqQ25CLE1BQUErQyxFQUFBaEcsRUFBQSxHQVNBRSxFQUFBcUcsWUFBQSxjQUFpQ1AsRUFBQTNELFdBQ2hDRSxPQUVJLE9BREFzQyxRQUFRQyxJQUFJLHFCQUNMbEMsTUFBTXNDLHdGQ1psQixNQUFBOUMsRUFBQXBDLEVBQUEsR0FFQUUsRUFBQXlGLGVBQUEsTUFDSXBELDRCQUNJLE1BQU1xRSxFQUFJL0QsS0FBS2dFLG1CQUNUQyxFQUFJakUsS0FBS2tFLGtCQUNUQyxFQUFNLElBQUk1RSxFQUFBRSxRQUFRLEVBQUcsR0FNM0IsT0FMSXNFLEVBQUlFLEVBQ0pFLEVBQUlDLFVBQVVMLEVBQUdBLEdBRWpCSSxFQUFJQyxVQUFVSCxFQUFHQSxHQUVkRSxFQUdIekUseUJBQ0osT0FBTzJFLE9BQU9DLFdBRVY1RSwwQkFDSixPQUFPMkUsT0FBT0UsNkZDbkJ0QixNQUFhNUMsRUFNVGpDLGNBQ0lNLEtBQUt3RSxjQUFnQixJQUFJbEIsTUFRN0I1RCxxQkFVQUEsbUJBQ0lRLFNBQVN1RSxpQkFBaUIsVUFBV0MsSUFDakMxQyxRQUFRQyxJQUFJLG9CQWVwQnZDLHFCQUFxQmlGLEdBQ2pCLElBQUssSUFBSXBILEVBQUksRUFBR0EsRUFBSW9FLEVBQWFpRCxZQUFZcEIsT0FBUWpHLElBQ2pELEdBQUlvRSxFQUFhaUQsWUFBWXJILEtBQU9vSCxFQUVoQyxPQURBM0MsUUFBUUMsSUFBSSxPQUFTMEMsRUFBYSxnQkFDM0IsRUFHZixPQUFPLEdBOUNhaEQsRUFBQWlELFlBQTZCLENBQUMsSUFBSyxJQUFLLElBQUssSUFBSyxLQUg5RXZILEVBQUFzRSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uLy4uL251bWVyaWNzL21vZGVscy9WZWN0b3IyLm1vZGVsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZUNhbnZhcyBleHRlbmRzIFZlY3RvcjIge1xyXG4gICAgcHJvdGVjdGVkIHRoZUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGlkOiBzdHJpbmcsIGF0dGFjaGVkVG86IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMudGhlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgdGhpcy50aGVDYW52YXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuR2V0Q2FudmFzQ29udGV4dDJEKHRoaXMudGhlQ2FudmFzKTtcclxuICAgICAgICB0aGlzLnRoZUNhbnZhcy5oZWlnaHQgPSB0aGlzLkdldEhlaWdodCgpO1xyXG4gICAgICAgIHRoaXMudGhlQ2FudmFzLndpZHRoID0gdGhpcy5HZXRXaWR0aCgpO1xyXG4gICAgICAgIGF0dGFjaGVkVG8uYXBwZW5kKHRoaXMudGhlQ2FudmFzKTtcclxuICAgIH1cclxuXHJcbiAgICBEcmF3KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJyNBOUE5QTknO1xyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuR2V0V2lkdGgoKSwgdGhpcy5HZXRIZWlnaHQoKSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICcjMDAwMGZmJztcclxuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgxMCwgMTAsIDEwMCwgMTAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBHcmVlZHlDbGVhckNhbnZhcygpIHtcclxuICAgICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5HZXRXaWR0aCgpLCB0aGlzLkdldEhlaWdodCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIEdldENhbnZhc0NvbnRleHQyRCh0aGVDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuICAgICAgICByZXR1cm4gdGhlQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBwcm90ZWN0ZWQgR2V0V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueDtcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCBHZXRIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMueCA9IHg7XHJcbiAgICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBjb25jYXQoKSB7XHJcbiAgICAgICAgcmV0dXJuICd4OlsnICsgdGhpcy54ICsgJ10sIHk6WycgKyB0aGlzLnkgKyAnXSc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VmFsdWVYKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLng7XHJcbiAgICB9XHJcbiAgICBnZXRWYWx1ZVkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMueTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRWYWx1ZVgoeDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgIH1cclxuICAgIHNldFZhbHVlWSh5OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG4gICAgc2V0VmFsdWVzKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCB7IE1haW4gfSBmcm9tICcuL2FwcGxpY2F0aW9uL19tYWluJztcclxuXHJcbmV4cG9ydCBjbGFzcyBBcHAge1xyXG4gICAgc3RhcnQoKSB7XHJcbiAgICAgICAgY29uc3QgbWFpbiA9IG5ldyBNYWluKCk7ICAgICBcclxuICAgICAgICBtYWluLlJ1big1MDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBhcHBsaWNhdGlvbiA9IG5ldyBBcHAoKTtcclxuYXBwbGljYXRpb24uc3RhcnQoKTsiLCJpbXBvcnQgeyBDYW52YXNNYW5hZ2VyIH0gZnJvbSBcIi4vY2FudmFzL0NhbnZhc01hbmFnZXJcIjtcclxuaW1wb3J0IHsgSW5wdXRNYW5hZ2VyIH0gZnJvbSBcIi4vaW5wdXQvSW5wdXRNYW5hZ2VyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpbiB7XHJcbiAgICBwcml2YXRlIGNhbnZhc01hbmFnZXI6IENhbnZhc01hbmFnZXI7XHJcbiAgICBwcml2YXRlIGlucHV0TWFuYWdlcjogSW5wdXRNYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBsb29wQ291bnQ6IG51bWJlciA9IDA7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhc01hbmFnZXIgPSBuZXcgQ2FudmFzTWFuYWdlcigpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRNYW5hZ2VyID0gbmV3IElucHV0TWFuYWdlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbGF1bmNoTWVzc2FnZTogc3RyaW5nID0gJ1N0YXJ0JztcclxuXHJcbiAgICBSdW4odGltZW91dDogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3J1bm5pbmcnKTtcclxuICAgICAgICB0aGlzLlN0YXJ0KCk7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLkxvb3AoKTtcclxuICAgICAgICAgICAgdGhpcy5sb29wQ291bnQrKztcclxuICAgICAgICB9LCB0aW1lb3V0KTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIFN0YXJ0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5sYXVuY2hNZXNzYWdlICsgJyB3aWxsIG5vdyBiZSBwb3N0ZWQgdG8gdGhlIGRvY3VtZW50ICcpO1xyXG4gICAgICAgIHRoaXMuaW5wdXRNYW5hZ2VyLkluaXRJbnB1dE1hbmFnZXIoKTtcclxuICAgICAgICB0aGlzLmNhbnZhc01hbmFnZXIuSW5pdENhbnZhc01hbmFnZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXVuY2hNZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIExvb3AoKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2luIGxvb3AuIFJlbmRlcmluZyAnICsgdGhpcy5sb29wQ291bnQpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0TWFuYWdlci5OZXdJbnB1dExvb3BDaGVjaygpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzTWFuYWdlci5EcmF3KCk7XHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuLi8uLi9udW1lcmljcy9tb2RlbHMvVmVjdG9yMi5tb2RlbFwiO1xyXG5pbXBvcnQgeyBQYXJlbnRDYW52YXMgfSBmcm9tIFwiLi9QYXJlbnRDYW52YXNcIjtcclxuaW1wb3J0IHsgVmlld3BvcnRIZWxwZXIgfSBmcm9tIFwiLi4vdmlld3BvcnQvVmlld3BvcnQuSGVscGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FudmFzTWFuYWdlciB7XHJcbiAgICBwcml2YXRlIHRoZUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBwcml2YXRlIG1haW5EaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgRHJhd2FibGVWZWN0b3I6IFZlY3RvcjI7XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJlbnRDYW52YXM6IFBhcmVudENhbnZhcztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBJbml0Q2FudmFzTWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLm1haW5EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLm1haW5EaXYuaWQgPSAnbWFpbl9kaXYnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5tYWluRGl2KTtcclxuICAgICAgICBjb25zdCBkb2N1bWVudERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluX2RpdicpO1xyXG4gICAgICAgIHRoaXMuRHJhd2FibGVWZWN0b3IgPSBWaWV3cG9ydEhlbHBlci5HZXRTcXVhcmVJbkJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLnBhcmVudENhbnZhcyA9IG5ldyBQYXJlbnRDYW52YXModGhpcy5EcmF3YWJsZVZlY3Rvci54LCB0aGlzLkRyYXdhYmxlVmVjdG9yLnksICdwYXJlbnQnLCBkb2N1bWVudERpdik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5wYXJlbnRDYW52YXMuUmVnaXN0ZXJDaGlsZENhbnZhcyh0aGlzLkRyYXdhYmxlVmVjdG9yLngsIHRoaXMuRHJhd2FibGVWZWN0b3IueSlcclxuICAgIH1cclxuXHJcblxyXG4gICAgXHJcblxyXG4gICAgRHJhdygpIHtcclxuICAgICAgICB0aGlzLnBhcmVudENhbnZhcy5EcmF3KCk7XHJcbiAgICAgICAgLy8gdGhpcy5jdHguZmlsbFN0eWxlID0gJyNBOUE5QTknO1xyXG4gICAgICAgIC8vIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuRHJhd2FibGVWZWN0b3IueSwgdGhpcy5EcmF3YWJsZVZlY3Rvci55KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5jdHguZmlsbFN0eWxlID0gJyMwMDAwZmYnO1xyXG4gICAgICAgIC8vIHRoaXMuY3R4LmZpbGxSZWN0KDEwLCAxMCwgMTAwLCAxMDApO1xyXG5cclxuICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudGhlQ2FudmFzKTtcclxuICAgIH1cclxuXHJcblxyXG59IiwiaW1wb3J0IHsgQmFzZUNhbnZhcyB9IGZyb20gXCIuL19CYXNlQ2FudmFzXCI7XHJcbmltcG9ydCB7IENoaWxkQ2FudmFzIH0gZnJvbSBcIi4vQ2hpbGRDYW52YXNcIjtcclxuXHJcbi8qKlxyXG4gKiBNYWluIGNhbnZhcy4gT25seSBjcmVhdGUgb25lIG9mIHRoZXNlXHJcbiAqXHJcbiAqIEBleHBvcnRcclxuICogQGNsYXNzIENoaWxkQ2FudmFzXHJcbiAqIEBleHRlbmRzIHtCYXNlQ2FudmFzfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBhcmVudENhbnZhcyBleHRlbmRzIEJhc2VDYW52YXMge1xyXG4gICBwcml2YXRlIGNoaWxkcmVuOiBDaGlsZENhbnZhc1tdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpZDogc3RyaW5nLCBhdHRhY2hlZFRvOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQsIGlkLCBhdHRhY2hlZFRvKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuID0gbmV3IEFycmF5PENoaWxkQ2FudmFzPigpO1xyXG4gICAgfVxyXG5cclxuICAgIFJlZ2lzdGVyQ2hpbGRDYW52YXMod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBjYW52YXNJZCA9ICdjaGlsZF9jYW52YXNfJyArICh0aGlzLmNoaWxkcmVuLmxlbmd0aCArIDEpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZWdpc3RlcmluZyBhIG5ldyBjYW52YXMgd2l0aCBJRCBbICcgKyBjYW52YXNJZCArICddJyk7XHJcbiAgICAgICAgY29uc3QgY2hpbGRDYW52YXMgPSBuZXcgQ2hpbGRDYW52YXMod2lkdGgsIGhlaWdodCwgY2FudmFzSWQsIHRoaXMudGhlQ2FudmFzKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGRDYW52YXMpO1xyXG4gICB9XHJcblxyXG4gICAgRHJhdygpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gICAgICAgY29uc29sZS5sb2coJ2RyYXcgY2FsbGVkIGZyb20gcGFyZW50Jyk7XHJcbiAgICAgICAvLyBzdXBlci5EcmF3KCk7XHJcbiAgICAgICBmb3IgKGNvbnN0IGNoaWxkQ2FudmFzIG9mIHRoaXMuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICBjb25zdCBkcmF3bkxheWVyID0gY2hpbGRDYW52YXMuRHJhdygpO1xyXG4gICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShkcmF3bkxheWVyLmNhbnZhcywgMCwgMCk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICB9XHJcbn0iLCJpbXBvcnQgeyBCYXNlQ2FudmFzIH0gZnJvbSBcIi4vX0Jhc2VDYW52YXNcIjtcclxuXHJcbi8qKlxyXG4gKiBjaGlsZCBjYW52YXMsIHJlZ2lzdGVyIGFzIG1hbnkgYXMgeW91IG5lZWRcclxuICpcclxuICogQGV4cG9ydFxyXG4gKiBAY2xhc3MgQ2hpbGRDYW52YXNcclxuICogQGV4dGVuZHMge0Jhc2VDYW52YXN9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2hpbGRDYW52YXMgZXh0ZW5kcyBCYXNlQ2FudmFzIHtcclxuIERyYXcoKSB7XHJcbiAgICAgY29uc29sZS5sb2coJ2NhbGxlZCBmcm9tIGNoaWxkJyk7XHJcbiAgICAgcmV0dXJuIHN1cGVyLkRyYXcoKTtcclxuXHJcbiB9XHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4uLy4uL251bWVyaWNzL21vZGVscy9WZWN0b3IyLm1vZGVsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVmlld3BvcnRIZWxwZXIge1xyXG4gICAgc3RhdGljIEdldFNxdWFyZUluQnJvd3NlcigpOiBWZWN0b3IyIHtcclxuICAgICAgICBjb25zdCBoID0gdGhpcy5HZXRCcm93c2VySGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc3QgdyA9IHRoaXMuR2V0QnJvd3NlcldpZHRoKCk7XHJcbiAgICAgICAgY29uc3QgYm94ID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgaWYgKGggPCB3KSB7XHJcbiAgICAgICAgICAgIGJveC5zZXRWYWx1ZXMoaCwgaCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYm94LnNldFZhbHVlcyh3LCB3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJveDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBHZXRCcm93c2VyV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgR2V0QnJvd3NlckhlaWdodCgpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIElucHV0TWFuYWdlciB7XHJcblxyXG4gICAgY3VycmVudElucHV0czogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSB2YWxpZElucHV0czogQXJyYXk8c3RyaW5nPiA9IFsndycsICdhJywgJ3MnLCAnZCcsICcgJ107XHJcbiAgICBwcml2YXRlIGtleUN1cnJlbnRseVByZXNzZWQ6IGJvb2xlYW47XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudElucHV0cyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjaGVja3MgZm9yIG5ldyBpbnB1dHMuIFNob3VsZCBiZSBjYWxsZWQgaW4gYSBsb29wXHJcbiAgICAgKlxyXG4gICAgICogQG1lbWJlcm9mIElucHV0TWFuYWdlclxyXG4gICAgICovXHJcbiAgICBOZXdJbnB1dExvb3BDaGVjaygpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBzZXRzIHVwIHRoZSBpbnB1dCBtYW5hZ2VyXHJcbiAgICAgKlxyXG4gICAgICogQG1lbWJlcm9mIElucHV0TWFuYWdlclxyXG4gICAgICovXHJcbiAgICBJbml0SW5wdXRNYW5hZ2VyKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXkgaXMgcHJlc3NlZCcpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICAvKipcclxuICAgICAqIGNoZWNrcyBpZiBhIGdpdmVuIGtleSBpcyBpbiB0aGUgbGlzdCBvZiB2YWxpZCBrZXlzXHJcbiAgICAgKiBcclxuICAgICAqIFRPRE86IHVzZSBgaW5jbHVkZXNgIGluc3RlYWQgb2YgYSBmb3IgbG9vcFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVzc2VkS2V5XHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICogQG1lbWJlcm9mIElucHV0TWFuYWdlclxyXG4gICAgICovXHJcbiAgICBjaGVja0tleVByZXNzSXNWYWxpZChwcmVzc2VkS2V5OiBzdHJpbmcpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IElucHV0TWFuYWdlci52YWxpZElucHV0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoSW5wdXRNYW5hZ2VyLnZhbGlkSW5wdXRzW2ldID09PSBwcmVzc2VkS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygna2V5ICcgKyBwcmVzc2VkS2V5ICsgJyBpcyBwcmVzc2VkJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gaWYgKElucHV0TWFuYWdlci52YWxpZElucHV0cy5pbmNsdWRlcyhwcmVzc2VkS2V5KSkge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG5cclxufSJdLCJzb3VyY2VSb290IjoiIn0=